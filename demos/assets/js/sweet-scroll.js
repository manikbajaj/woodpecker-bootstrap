!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).SweetScroll=e()}(this,function(){"use strict";var O=function(){return(O=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},$=!("undefined"==typeof window||!window.document||!window.document.createElement),l=!!$&&(window.history&&"pushState"in window.history&&"file:"!==window.location.protocol),u=function(){var t=!1;if(!$)return t;try{var e=window,n=Object.defineProperty({},"passive",{get:function(){t=!0}});e.addEventListener("test",null,n),e.removeEventListener("test",null,n)}catch(t){}return t}(),M=function(t){return"string"==typeof t},s=function(t){return"function"==typeof t},a=function(t){return Array.isArray(t)},c=function(t,e){return t&&t.hasOwnProperty(e)},t=$?window.requestAnimationFrame.bind(window):null,e=$?window.cancelAnimationFrame.bind(window):null,r=Math.cos,f=Math.sin,p=Math.pow,h=Math.sqrt,d=Math.PI,i={linear:function(t){return t},easeInQuad:function(t,e,n,o,i){return o*(e/=i)*e+n},easeOutQuad:function(t,e,n,o,i){return-o*(e/=i)*(e-2)+n},easeInOutQuad:function(t,e,n,o,i){return(e/=i/2)<1?o/2*e*e+n:-o/2*(--e*(e-2)-1)+n},easeInCubic:function(t,e,n,o,i){return o*(e/=i)*e*e+n},easeOutCubic:function(t,e,n,o,i){return o*((e=e/i-1)*e*e+1)+n},easeInOutCubic:function(t,e,n,o,i){return(e/=i/2)<1?o/2*e*e*e+n:o/2*((e-=2)*e*e+2)+n},easeInQuart:function(t,e,n,o,i){return o*(e/=i)*e*e*e+n},easeOutQuart:function(t,e,n,o,i){return-o*((e=e/i-1)*e*e*e-1)+n},easeInOutQuart:function(t,e,n,o,i){return(e/=i/2)<1?o/2*e*e*e*e+n:-o/2*((e-=2)*e*e*e-2)+n},easeInQuint:function(t,e,n,o,i){return o*(e/=i)*e*e*e*e+n},easeOutQuint:function(t,e,n,o,i){return o*((e=e/i-1)*e*e*e*e+1)+n},easeInOutQuint:function(t,e,n,o,i){return(e/=i/2)<1?o/2*e*e*e*e*e+n:o/2*((e-=2)*e*e*e*e+2)+n},easeInSine:function(t,e,n,o,i){return-o*r(e/i*(d/2))+o+n},easeOutSine:function(t,e,n,o,i){return o*f(e/i*(d/2))+n},easeInOutSine:function(t,e,n,o,i){return-o/2*(r(d*e/i)-1)+n},easeInExpo:function(t,e,n,o,i){return 0===e?n:o*p(2,10*(e/i-1))+n},easeOutExpo:function(t,e,n,o,i){return e===i?n+o:o*(1-p(2,-10*e/i))+n},easeInOutExpo:function(t,e,n,o,i){return 0===e?n:e===i?n+o:(e/=i/2)<1?o/2*p(2,10*(e-1))+n:o/2*(2-p(2,-10*--e))+n},easeInCirc:function(t,e,n,o,i){return-o*(h(1-(e/=i)*e)-1)+n},easeOutCirc:function(t,e,n,o,i){return o*h(1-(e=e/i-1)*e)+n},easeInOutCirc:function(t,e,n,o,i){return(e/=i/2)<1?-o/2*(h(1-e*e)-1)+n:o/2*(h(1-(e-=2)*e)+1)+n}},v=function(t){return Array.prototype.slice.call(t?document.querySelectorAll(t):[])},E=function(t){return v(t).shift()||null},I=function(t){return t instanceof Element},C=function(t){return t===window},S=function(t){return t===document.documentElement||t===document.body},g=function(t,e){if(I(e))return t===e;for(var n=v(e),o=n.length;0<=--o&&n[o]!==t;);return-1<o},k=function(t){return Math.max(t.scrollHeight,t.clientHeight,t.offsetHeight)},A=function(t){return Math.max(t.scrollWidth,t.clientWidth,t.offsetWidth)},L=function(t){return{width:A(t),height:k(t)}},w={y:"scrollTop",x:"scrollLeft"},m={y:"pageYOffset",x:"pageXOffset"},P=function(t,e){return C(t)?t[m[e]]:t[w[e]]},y=function(t,e,n){if(C(t)){var o="y"===n;t.scrollTo(o?t.pageXOffset:e,o?e:t.pageYOffset)}else t[w[n]]=e},Q=function(t,e){var n=t.getBoundingClientRect();if(n.width||n.height){var o={top:0,left:0},i=void 0;if(C(e)||S(e))i=document.documentElement,o.top=window[m.y],o.left=window[m.x];else{var r=(i=e).getBoundingClientRect();o.top=-1*r.top+i[w.y],o.left=-1*r.left+i[w.x]}return{top:n.top+o.top-i.clientTop,left:n.left+o.left-i.clientLeft}}return n},x=$?"onwheel"in document?"wheel":"mousewheel":"wheel",b=function(n,o,t,i,r){t.split(" ").forEach(function(t){var e;n[o]("wheel"===(e=t)?x:e,i,!!u&&{passive:r})})},z=function(t,e,n,o){return b(t,"addEventListener",e,n,o)},W=function(t,e,n,o){return b(t,"removeEventListener",e,n,o)},j=/^(\+|-)=(\d+(?:\.\d+)?)$/,H=function(t,e){var n,o={top:0,left:0,relative:!1};if(c(t,"top")||c(t,"left"))o=O({},o,t);else if(a(t))if(1<t.length)o.top=t[0],o.left=t[1];else{if(1!==t.length)return null;o.top=e?t[0]:0,o.left=e?0:t[0]}else if(!a(n=t)&&0<=n-parseFloat(n)+1)e?o.top=t:o.left=t;else{if(!M(t))return null;var i=t.trim().match(j);if(!i)return null;var r=i[1],u=parseInt(i[2],10);o.left="+"===r?(o.top=e?u:0,e?0:u):(o.top=e?-u:0,e?0:-u),o.relative=!0}return o},o={trigger:"[data-scroll]",header:"[data-scroll-header]",duration:1e3,easing:"easeOutQuint",offset:0,vertical:!0,horizontal:!1,cancellable:!0,updateURL:!1,preventDefault:!0,stopPropagation:!0,before:null,after:null,cancel:null,complete:null,step:null},T="click",D="wheel touchstart touchmove";return function(){function d(t,e){var h=this;this.$el=null,this.ctx={$trigger:null,opts:null,progress:!1,pos:null,startPos:null,easing:null,start:0,id:0,cancel:!1,hash:null},this.loop=function(t){var e=h,r=e.$el,n=e.ctx;if(n.start||(n.start=t),n.progress&&r){var o=n.opts,u=n.pos,i=n.start,a=n.startPos,l=n.easing,s=o.duration,c={top:"y",left:"x"},f=t-i,p=Math.min(1,Math.max(f/s,0));Object.keys(u).forEach(function(t){var e=u[t],n=a[t],o=e-n;if(0!==o){var i=l(p,s*p,0,1,s);y(r,Math.round(n+o*i),c[t])}}),f<=s?(h.hook(o,"step",p),n.id=d.raf(h.loop)):h.stop(!0)}else h.stop()},this.handleClick=function(t){for(var e=h.opts,n=t.target;n&&n!==document;n=n.parentNode)if(g(n,e.trigger)){var o=JSON.parse(n.getAttribute("data-scroll-options")||"{}"),i=n.getAttribute("data-scroll")||n.getAttribute("href"),r=O({},e,o),u=r.preventDefault,a=r.stopPropagation,l=r.vertical,s=r.horizontal;u&&t.preventDefault(),a&&t.stopPropagation(),h.ctx.$trigger=n,s&&l?h.to(i,r):l?h.toTop(i,r):s&&h.toLeft(i,r);break}},this.handleStop=function(t){var e=h.ctx,n=e.opts;n&&n.cancellable?(e.cancel=!0,h.stop()):t.preventDefault()},this.opts=O({},o,t||{});var n=null;$&&(n="string"==typeof e?E(e):null!=e?e:window),(this.$el=n)&&this.bind(!0,!1)}return d.create=function(t,e){return new d(t,e)},d.prototype.to=function(t,e){if($){var n=this.$el,o=this.ctx,i=this.opts,r=o.$trigger,u=O({},i,e||{}),a=u.offset,l=u.vertical,s=u.horizontal,c=I(u.header)?u.header:E(u.header),f=M(t)&&/^#/.test(t)?t:null;if(o.opts=u,o.cancel=!1,o.hash=f,this.stop(),n){var p=H(a,l),h=H(t,l),d={top:0,left:0};if(h)if(h.relative){var v=P(n,l?"y":"x");d.top=l?v+h.top:h.top,d.left=l?h.left:v+h.left}else d=h;else if(M(t)&&"#"!==t){var g=E(t);if(!g)return;d=Q(g,n)}p&&(d.top+=p.top,d.left+=p.left),c&&(d.top=Math.max(0,d.top-L(c).height));var w,m,y={viewport:{width:(m=C(w=n)||S(w))?Math.min(window.innerWidth,document.documentElement.clientWidth):w.clientWidth,height:m?window.innerHeight:w.clientHeight},size:m?{width:Math.max(A(document.body),A(document.documentElement)),height:Math.max(k(document.body),k(document.documentElement))}:L(w)},x=y.viewport,b=y.size;d.top=l?Math.max(0,Math.min(b.height-x.height,d.top)):P(n,"y"),d.left=s?Math.max(0,Math.min(b.width-x.width,d.left)):P(n,"x"),!1!==this.hook(u,"before",d,r)?(o.pos=d,this.start(u),this.bind(!1,!0)):o.opts=null}}},d.prototype.toTop=function(t,e){this.to(t,O({},e||{},{vertical:!0,horizontal:!1}))},d.prototype.toLeft=function(t,e){this.to(t,O({},e||{},{vertical:!1,horizontal:!0}))},d.prototype.toElement=function(t,e){var n=this.$el;$&&n&&this.to(Q(t,n),e||{})},d.prototype.stop=function(t){void 0===t&&(t=!1);var e=this.$el,n=this.ctx,o=n.pos;e&&n.progress&&(d.caf(n.id),n.progress=!1,n.start=0,n.id=0,t&&o&&(y(e,o.left,"x"),y(e,o.top,"y")),this.complete())},d.prototype.update=function(t){if(this.$el){var e=O({},this.opts,t);this.stop(),this.unbind(!0,!0),this.opts=e,this.bind(!0,!1)}},d.prototype.destroy=function(){this.$el&&(this.stop(),this.unbind(!0,!0),this.$el=null)},d.prototype.onBefore=function(t,e){return!0},d.prototype.onStep=function(t){},d.prototype.onAfter=function(t,e){},d.prototype.onCancel=function(){},d.prototype.onComplete=function(t){},d.prototype.start=function(t){var e=this.ctx;e.opts=t,e.progress=!0,e.easing=s(t.easing)?t.easing:i[t.easing];var n=this.$el,o={top:P(n,"y"),left:P(n,"x")};e.startPos=o,e.id=d.raf(this.loop)},d.prototype.complete=function(){var t=this.$el,e=this.ctx,n=e.hash,o=e.cancel,i=e.opts,r=e.pos,u=e.$trigger;if(t&&i){if(null!=n&&n!==window.location.hash){var a=i.updateURL;$&&l&&!1!==a&&window.history["replace"===a?"replaceState":"pushState"](null,"",n)}this.unbind(!1,!0),e.opts=null,e.$trigger=null,o?this.hook(i,"cancel"):this.hook(i,"after",r,u),this.hook(i,"complete",o)}},d.prototype.hook=function(t,e){for(var n,o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];var r,u,a=t[e];return s(a)&&(r=a.apply(this,o.concat([this]))),u=(n=this)["on"+(e[0].toUpperCase()+e.slice(1))].apply(n,o),void 0!==r?r:u},d.prototype.bind=function(t,e){var n=this.$el,o=this.ctx.opts;n&&(t&&z(n,T,this.handleClick,!1),e&&z(n,D,this.handleStop,!o||o.cancellable))},d.prototype.unbind=function(t,e){var n=this.$el,o=this.ctx.opts;n&&(t&&W(n,T,this.handleClick,!1),e&&W(n,D,this.handleStop,!o||o.cancellable))},d.raf=t,d.caf=e,d}()});